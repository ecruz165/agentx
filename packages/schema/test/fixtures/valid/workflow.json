{
  "name": "deploy-verify",
  "type": "workflow",
  "version": "1.0.0",
  "description": "Verifies deployment by checking commits, pipeline status, and config",
  "tags": ["deploy", "verification", "cicd"],
  "author": "edwin",
  "runtime": "node",
  "steps": [
    {
      "id": "analyze-commits",
      "skill": "skills/scm/git/commit-analyzer",
      "inputs": {
        "repoPath": "${inputs.repoPath}",
        "days": 7
      }
    },
    {
      "id": "check-pipeline",
      "skill": "skills/cicd/harness/deploy-status",
      "inputs": {
        "pipelineId": "${inputs.pipelineId}"
      }
    },
    {
      "id": "verify-config",
      "skill": "skills/cloud/aws/ssm-lookup",
      "inputs": {
        "paramName": "${steps.check-pipeline.outputs.envConfig}"
      }
    }
  ],
  "inputs": [
    {
      "name": "repoPath",
      "type": "string",
      "required": true,
      "description": "Path to the repository"
    },
    {
      "name": "pipelineId",
      "type": "string",
      "required": true,
      "description": "Harness pipeline identifier"
    }
  ],
  "outputs": {
    "format": "json"
  }
}
